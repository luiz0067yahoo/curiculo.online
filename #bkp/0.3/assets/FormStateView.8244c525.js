import{_ as w,H as M,F as A}from"./FooterView.16e066b3.js";import{I as E,a as h,u as c}from"./until.ff7b9a9c.js";import{r as f,o as a,c as d,a as y,d as e,t as m,w as b,v as p,g as u,F as T,h as k,e as g}from"./index.472a0aed.js";const O={components:{HeaderView:M,FooterView:A},name:"FormUserComponent",data(){return{url:"https://curiculo.online/server/estados",state:"new",errorMsg:"",successMsg:"",infoMsg:"",modalDelete:null,elements:[],elementCurrent:{id:"",nome:"",sigla:""}}},mounted:function(){this.getAllelements(),E().mask(document.querySelectorAll("input")),this.modalDelete=new bootstrap.Modal(document.getElementById("modalDelete"))},methods:{async getAllelements(){let l=this.elements,t=this.errorMsg;await h.get(this.url,{},{mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json;charset=UTF-8"}}).then(function(o){o.data.error?(this.errorMsg=o.data.message,console.log(this.errorMsg)):l=c.ArrayObjUtf8Tounicode(o.data.elements)}),this.elements=l,this.errorMsg=t},async findElements(){this.state="find";let l=this.elements,t=this.errorMsg;await h.get(this.url+"?"+new URLSearchParams(this.elementCurrent).toString(),{},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json;charset=UTF-8"}}).then(function(o){o.data.error?t=o.data.message:l=c.ArrayObjUtf8Tounicode(o.data.elements)}),this.elements=l,this.errorMsg=t},async findbyField(l){this.state="find";let t=this.elements,o=this.errorMsg;await h.get(this.url+"?"+new URLSearchParams(l).toString(),{},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json;charset=UTF-8"}}).then(function(r){r.data.error?o=r.data.message:t=c.ArrayObjUtf8Tounicode(r.data.elements)}),this.elements=t,this.errorMsg=o},async findID(){this.state="find";let l=this.elements,t=this.errorMsg,o=this.successMsg,r=this.elementCurrent;await h.get(this.url+"/"+r.id,{},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json;charset=UTF-8"}}).then(function(s){r={},s.data.error?t=s.data.message:(o=s.data.message,l=c.ArrayObjUtf8Tounicode(s.data.elements),r=l[0])}),this.elements=l,this.errorMsg=t,this.successMsg=o,this.elementCurrent=r},async saveElement(){this.state="edit",c.toFormData(this.elementCurrent),/^\+?(0|[1-9]\d*)$/.test(this.elementCurrent.id)?await this.updateElement():await this.createElement()},async updateElement(){this.state="edit";var l={...this.elementCurrent};delete l.id;var t=c.toFormData(l);let o=this.elements,r=this.errorMsg,s=this.successMsg,n=this.elementCurrent;await h.put(this.url+"/"+n.id,t,{mode:"no-cors",headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(_){_.data.error?r=_.data.message:(s=_.data.message,o=c.ArrayObjUtf8Tounicode(_.data.elements),n=o[0])}),this.elements=o,this.errorMsg=r,this.successMsg=s,this.elementCurrent=n},async createElement(){this.state="edit";var l=c.toFormData(this.elementCurrent);let t=this.elements,o=this.errorMsg,r=this.successMsg,s=this.elementCurrent;await h.post(this.url,l,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(n){n.data.error?o=n.data.message:(r=n.data.message,t=c.ArrayObjUtf8Tounicode(n.data.elements),s=t[0])}),this.elements=t,this.errorMsg=o,this.successMsg=r,this.elementCurrent=s},async deleteElement(){this.state="find";let l=this.elementCurrent,t=this.elements,o=this.errorMsg,r=this.successMsg,s=this.getAllelements;await h.delete(this.url+"/"+l.id,{},{mode:"no-cors",headers:{"Content-Type":"application/json;charset=UTF-8"},withCredentials:!0,credentials:"same-origin"}).then(function(n){l={},n.data.error?o=n.data.message:(r=n.data.message,s())}).catch(function(n){o=n.data}),this.modalDelete.show(),this.elements=t,this.errorMsg=o,this.successMsg=r,this.elementCurrent={id:"",nome:"",sigla:""}},edit(l){this.state="edit",this.elementCurrent=l},confirmDeleteElement(l){this.elementCurrent=l,this.modalDelete.show()},clearMsg(){this.errorMsg="",this.successMsg=""},cleanFieldHiddeButtons(){try{for(var l in CKEDITOR.instances){var t=CKEDITOR.instances[l];t.setData("")}}catch{}this.elementCurrent={id:"",nome:"",sigla:""},this.modalDelete.hide()},newState(){this.state="new",this.cleanFieldHiddeButtons()},cancelState(){this.state="cancel",this.cleanFieldHiddeButtons()},close(){this.modalDelete.hide()},editState(){this.state="edit",this.cleanFieldHiddeButtons()}}},D={class:"container"},S={class:"modal",id:"modalDelete",tabindex:"-1",role:"dialog","aria-labelledby":"modalDeleteLabel","aria-hidden":"true"},F={class:"modal-dialog",role:"document"},U={class:"modal-content"},x={class:"modal-header"},P=e("h5",{class:"modal-title"},"Excluir",-1),H=e("span",{"aria-hidden":"true"},"\xD7",-1),I=[H],V={class:"modal-body"},j={class:"modal-footer"},N=e("h1",null,"CADASTRO DE ESTADOS",-1),B=e("br",null,null,-1),G=e("br",null,null,-1),L={class:"row"},R={class:"sm-12"},X={class:"form-row align-items-center"},q=e("label",{class:"w-100"},"C\xD3DIGO",-1),K={class:"input-group mb-3"},z=e("label",{class:"sr-only",for:"inlineFormInputGroupcodigo"},"codigo",-1),J=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fa fa-key","aria-hidden":"true"})])],-1),Q=["disabled"],W={class:"input-group-append"},Y=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),Z=[Y],$=e("label",{class:"w-100"},"NOME",-1),ee={class:"input-group mb-3"},te=e("label",{class:"sr-only",for:"inlineFormInputGroupnome"},"nome",-1),se=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fas fa-address-card"})])],-1),ne=["disabled"],le={class:"input-group-append"},oe=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),ie=[oe],re=e("label",{class:"w-100"},"SIGLA",-1),ae={class:"input-group mb-3"},de=e("label",{class:"sr-only",for:"inlineFormInputGroupnome"},"Sigla",-1),ce=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fa fa-bars","aria-hidden":"true"})])],-1),ue=["disabled"],he={class:"input-group-append"},me=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),_e=[me],ge=e("i",{class:"fa fa-sticky-note","aria-hidden":"true"},null,-1),be=g(" Novo"),pe=[ge,be],Ce=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),fe=g(" Buscar"),ye=[Ce,fe],Te=e("i",{class:"fa fa-save","aria-hidden":"true"},null,-1),ve=g(" Salvar "),we=[Te,ve],Me=e("i",{class:"fa fa-times","aria-hidden":"true"},null,-1),Ae=g(" Excluir"),Ee=[Me,Ae],ke=e("i",{class:"fa fa-ban","aria-hidden":"true"},null,-1),Oe=g(" Cancelar"),De=[ke,Oe],Se=e("br",null,null,-1),Fe={class:"alert alert-success d-none",role:"alert"},Ue={class:"alert alert-danger d-none",role:"alert"},xe={class:"alert alert-info d-none",role:"alert"},Pe=e("br",null,null,-1),He={class:"table table-striped resultado_busca"},Ie=e("thead",null,[e("tr",null,[e("th",null,"C\xF3digo"),e("th",null,"Nome"),e("th",null,"Sigla"),e("th",null,"A\xE7\xE3o")])],-1),Ve=["onUpdate:modelValue"],je=["onClick"],Ne=e("i",{class:"fa fa-edit","aria-hidden":"true"},null,-1),Be=[Ne],Ge=["onClick"],Le=e("i",{class:"fa fa-times","aria-hidden":"true"},null,-1),Re=[Le];function Xe(l,t,o,r,s,n){const _=f("HeaderView"),v=f("FooterView");return a(),d(T,null,[y(_,{title:"Curiculo Online - Cadastro de Estados"}),e("div",D,[e("div",S,[e("div",F,[e("div",U,[e("div",x,[P,e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=i=>n.close())},I)]),e("div",V,[e("p",null,"tem certeza que desja excluir este estado "+m(s.elementCurrent.nome)+".",1)]),e("div",j,[e("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=i=>n.deleteElement())},"Sim"),e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:t[2]||(t[2]=i=>n.close())},"N\xE3o")])])])]),N,B,G,e("div",L,[e("div",R,[e("div",X,[q,e("div",K,[z,J,b(e("input",{type:"number",disabled:s.state!="new",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=i=>s.elementCurrent.id=i),placeholder:"C\xF3digo",name:"id"},null,8,Q),[[p,s.elementCurrent.id]]),e("div",W,[s.state=="new"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo buscarcodigo",onClick:t[4]||(t[4]=i=>n.findID(s.elementCurrent.id))},Z)):u("",!0)])]),$,e("div",ee,[te,se,b(e("input",{type:"text",disabled:s.state!="new"&&s.state!="edit",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=i=>s.elementCurrent.nome=i),placeholder:"Nome do Estado",name:"nome"},null,8,ne),[[p,s.elementCurrent.nome]]),e("div",le,[s.state=="new"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo",onClick:t[6]||(t[6]=i=>n.findbyField({nome:s.elementCurrent.nome}))},ie)):u("",!0)])]),re,e("div",ae,[de,ce,b(e("input",{type:"text",disabled:s.state!="new"&&s.state!="edit",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=i=>s.elementCurrent.sigla=i),placeholder:"Sigla do Estado",name:"nome"},null,8,ue),[[p,s.elementCurrent.sigla]]),e("div",he,[s.state=="new"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo",onClick:t[8]||(t[8]=i=>n.findbyField({sigla:s.elementCurrent.sigla}))},_e)):u("",!0)])]),s.state=="find"||s.state=="cancel"||s.state=="edit"?(a(),d("button",{key:0,name:"novo",type:"button",class:"btn btn-dark novo",onClick:t[9]||(t[9]=i=>n.newState())},pe)):u("",!0),s.state=="new"?(a(),d("button",{key:1,name:"buscar",type:"button",class:"btn btn-primary buscar",onClick:t[10]||(t[10]=i=>n.findElements())},ye)):u("",!0),s.state=="new"||s.state=="edit"?(a(),d("button",{key:2,name:"salvar",type:"button",class:"btn btn-success salvar",onClick:t[11]||(t[11]=i=>{n.saveElement(),n.clearMsg()})},we)):u("",!0),u("",!0),s.state=="edit"?(a(),d("button",{key:4,name:"excluir",type:"button",class:"btn btn-danger excluir",onClick:t[13]||(t[13]=i=>n.confirmDeleteElement(s.elementCurrent))},Ee)):u("",!0),s.state=="new"||s.state=="edit"?(a(),d("button",{key:5,name:"cancelar",type:"button",class:"btn btn-danger cancelar",onClick:t[14]||(t[14]=i=>n.cancelState())},De)):u("",!0)]),Se,e("div",Fe,m(s.successMsg),1),e("div",Ue,m(s.errorMsg),1),e("div",xe,m(s.infoMsg),1),Pe,e("table",He,[Ie,e("tbody",null,[(a(!0),d(T,null,k(s.elements,i=>(a(),d("tr",null,[e("td",null,[b(e("input",{type:"hidden",name:"id","onUpdate:modelValue":C=>i.id=C},null,8,Ve),[[p,i.id]]),g(m(i.id),1)]),e("td",null,m(i.nome),1),e("td",null,m(i.sigla),1),e("td",null,[e("button",{name:"editar",type:"button",class:"btn btn-primary minieditar btn-sm",onClick:C=>n.edit(i)},Be,8,je),e("button",{name:"excluir",type:"button",class:"btn btn-danger miniexcluir btn-sm",onClick:C=>n.confirmDeleteElement(i)},Re,8,Ge)])]))),256))])])])])]),y(v)],64)}const Je=w(O,[["render",Xe]]);export{Je as default};
