import{_ as f,H as y,F as C}from"./FooterView.a4e143bf.js";import{I as v,u as h,a as b}from"./until.5e20a561.js";import{o as a,c as d,d as e,t as p,w as m,v as _,g as c,F as w,h as x,e as u}from"./index.c4dbb4fd.js";const M={components:{HeaderView:y,FooterView:C},name:"FormParceirosComponent",data(){return{url:"https://curiculo.online/server/parceiros",state:"new",repeat_password:"",errorMsg:"",errorPhone:"",errorstatus:"",successMsg:"",infoMsg:"",search:"",modalDelete:null,modalForm:null,elements:[],elementCurrent:{id:"",nome:"",id_unidade:"",cnpj:""}}},mounted:function(){this.getAllelements(),v().mask(document.querySelectorAll("input.mask")),this.modalDelete=new bootstrap.Modal(document.getElementById("modalDelete")),this.modalForm=new bootstrap.Modal(document.getElementById("modalForm"))},methods:{setPhone(){var i=$("#phone").val();this.errorPhone=null,h.phoneIsValid(i)?this.elementCurrent.phone=i:this.errorPhone='n\xE3o \xE9 um telefone v\xE1lido exemplo de telefone: "(99) 99999-9999"'},setCellPhone(){var i=$("#status").val();this.errorstatus=null,h.phoneIsValid(i)?this.elementCurrent.status=i:this.errorstatus='n\xE3o \xE9 um celular v\xE1lido exemplo de telefone: "(99) 99999-9999"'},async getAllelements(){let i=this.elements,t=this.errorMsg;await b.get(this.url,{},{mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json;charset=UTF-8"}}).then(function(l){l.data.error?(this.errorMsg=l.data.id_unidadesage,console.log(this.errorMsg)):i=h.ArrayObjUtf8Tounicode(l.data.elements)}),this.elements=i,this.errorMsg=t,this.modalForm.hide()},async findElements(){this.state="find";let i=this.elements,t=this.errorMsg;await b.get(this.url+"?"+new URLSearchParams(this.elementCurrent).toString(),{},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json;charset=UTF-8"}}).then(function(l){l.data.error?t=l.data.id_unidadesage:i=h.ArrayObjUtf8Tounicode(l.data.elements)}),this.elements=i,this.errorMsg=t,this.modalForm.hide()},async findbyField(i){console.log(i),this.state="find";let t=this.elements,l=this.errorMsg;await b.get(this.url+"?"+new URLSearchParams(i).toString(),{},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json;charset=UTF-8"}}).then(function(r){r.data.error?l=r.data.id_unidadesage:t=h.ArrayObjUtf8Tounicode(r.data.elements)}),this.elements=t,this.errorMsg=l,this.modalForm.hide()},async findID(){this.state="find";let i=this.elements,t=this.errorMsg,l=this.successMsg,r=this.elementCurrent;await b.get(this.url+"/"+r.id,{},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json;charset=UTF-8"}}).then(function(s){r={},s.data.error?t=s.data.id_unidadesage:(l=s.data.id_unidadesage,i=h.ArrayObjUtf8Tounicode(s.data.elements),r=i[0],$("#phone").val(r.phone),$("#status").val(r.status))}),this.elements=i,this.errorMsg=t,this.successMsg=l,this.elementCurrent=r,this.modalForm.hide()},async saveElement(){this.state="edit",h.toFormData(this.elementCurrent),/^\+?(0|[1-9]\d*)$/.test(this.elementCurrent.id)?await this.updateElement():await this.createElement(),this.modalForm.hide()},async updateElement(){this.state="edit";var i={...this.elementCurrent};delete i.id;var t=h.toFormData(i);let l=this.elements,r=this.errorMsg,s=this.successMsg,o=this.elementCurrent;await b.put(this.url+"/"+o.id,t,{mode:"no-cors",headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(n){n.data.error?r=n.data.id_unidadesage:(s=n.data.id_unidadesage,l=h.ArrayObjUtf8Tounicode(n.data.elements),o=l[0])}),this.elements=l,this.errorMsg=r,this.successMsg=s,this.elementCurrent=o,this.modalForm.hide()},async createElement(){this.state="edit";var i=h.toFormData(this.elementCurrent);let t=this.elements,l=this.errorMsg,r=this.successMsg,s=this.elementCurrent;await b.post(this.url,i,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(o){o.data.error?l=o.data.id_unidadesage:(r=o.data.id_unidadesage,t=h.ArrayObjUtf8Tounicode(o.data.elements),s=t[0])}),this.elements=t,this.errorMsg=l,this.successMsg=r,this.elementCurrent=s,this.modalForm.hide()},async deleteElement(){this.state="find";let i=this.elementCurrent,t=this.elements,l=this.errorMsg,r=this.successMsg,s=this.getAllelements;await b.delete(this.url+"/"+i.id,{},{mode:"no-cors",headers:{"Content-Type":"application/json;charset=UTF-8"},withCredentials:!0,credentials:"same-origin"}).then(function(o){i={},o.data.error?(l=o.data.id_unidadesage,console.log(o.data)):(r=o.data.id_unidadesage,s())}).catch(function(o){console.log(o),console.log("Show error notification!"),l=o.data}),this.modalDelete.hide(),this.modalForm.hide(),this.elements=t,this.errorMsg=l,this.successMsg=r,this.elementCurrent={id:"",nome:"",id_unidade:"",cnpj:""}},edit(i){this.state="edit",this.elementCurrent=i,this.modalForm.show()},confirmDeleteElement(i){this.elementCurrent=i,this.modalDelete.show()},clearMsg(){this.errorMsg="",this.successMsg=""},cleanFieldHiddeButtons(){try{for(var i in CKEDITOR.instances){var t=CKEDITOR.instances[i];t.setData("")}}catch{}this.elementCurrent={id:"",nome:"",id_unidade:"",cnpj:""},this.modalDelete.hide()},newState(){this.state="new",this.cleanFieldHiddeButtons(),this.modalForm.show()},filterState(){this.state="filter",this.cleanFieldHiddeButtons(),this.modalForm.show()},cancelState(){this.state="cancel",this.cleanFieldHiddeButtons(),this.modalForm.hide()},close(){this.modalDelete.hide(),this.modalForm.hide()},editState(){this.state="edit",this.cleanFieldHiddeButtons()}}},T={class:"mx-4"},k={class:"modal",id:"modalForm",tabindex:"-1",role:"dialog","aria-labelledby":"modalFormLabel","aria-hidden":"true"},F={class:"modal-dialog",role:"document"},A={class:"modal-content"},E={class:"modal-header"},j={class:"modal-title"},D=e("span",{"aria-hidden":"true"},"\xD7",-1),O=[D],U={class:"modal-body"},P=e("label",{class:"w-100"},"C\xD3DIGO",-1),S={class:"input-group mb-3"},I=e("label",{class:"sr-only",for:"inlineFormInputGroupcodigo"},"codigo",-1),V=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fa fa-key","aria-hidden":"true"})])],-1),H=["disabled"],B={class:"input-group-append"},N=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),L=[N],G=e("label",{class:"w-100"},"Nome",-1),z={class:"input-group mb-3"},R=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fas fa-bars"})])],-1),X={class:"input-group-append"},q=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),K=[q],J=e("label",{class:"w-100"},"cnpj",-1),Q={class:"input-group mb-3"},W=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fas fa-money-check-alt"})])],-1),Y={class:"input-group-append"},Z=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),ee=[Z],te={class:"modal-footer"},se=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),ne=u(" Buscar"),oe=[se,ne],ie=e("i",{class:"fa fa-save","aria-hidden":"true"},null,-1),le=u(" Salvar "),re=[ie,le],ae=e("i",{class:"fa fa-tiid_unidade","aria-hidden":"true"},null,-1),de=u(" Excluir"),ce=[ae,de],ue=e("i",{class:"fa fa-ban","aria-hidden":"true"},null,-1),he=u(" Cancelar"),me=[ue,he],_e={class:"modal",id:"modalDelete",tabindex:"1",role:"dialog","aria-labelledby":"modalDeleteLabel","aria-hidden":"true"},pe={class:"modal-dialog",role:"document"},be={class:"modal-content"},ge={class:"modal-header"},fe=e("h5",{class:"modal-title"},"Excluir parceiro",-1),ye=e("span",{"aria-hidden":"true"},"\xD7",-1),Ce=[ye],ve={class:"modal-body"},we={class:"modal-footer"},xe={class:"d-flex justify-content-between mt-4"},Me=e("h1",null,"Parceiros",-1),Te={class:"d-flex"},ke=e("div",{class:"bg-secondary rounded-pill mx-4",style:{width:"60px !important",height:"60px!important"}},null,-1),Fe=e("h1",null,"ADM",-1),Ae={class:"bg-transparent border-0"},Ee=e("div",{class:"bg-danger rounded-pill position-absolute",style:{"margin-left":"40px",width:"6px",height:"6px"}},null,-1),je={style:{width:"60px !important",height:"60px!important"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",fill:"currentColor"},De=e("path",{d:"M439.39 362.29c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71zM67.53 368c21.22-27.97 44.42-74.33 44.53-159.42 0-.2-.06-.38-.06-.58 0-61.86 50.14-112 112-112s112 50.14 112 112c0 .2-.06.38-.06.58.11 85.1 23.31 131.46 44.53 159.42H67.53zM224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64z"},null,-1),Oe=[De],Ue=e("button",{class:"bg-transparent border-0"},[e("i",{class:"fas fa-bars"})],-1),Pe={class:"d-flex justify-content-end my-4"},Se={class:"input-group w-25"},Ie=e("i",{class:"fas fa-search"},null,-1),Ve=[Ie],He=u(" Novo "),Be=e("i",{class:"fas fa-plus"},null,-1),Ne=[He,Be],Le=u(" Filtro "),Ge=e("i",{class:"fas fa-filter"},null,-1),ze=[Le,Ge],Re=e("br",null,null,-1),Xe=e("br",null,null,-1),qe={class:""},Ke={class:"sm-12"},Je={class:"form-row align-items-center modal",id:"modalForm_",tabindex:"-1",role:"dialog","aria-labelledby":"modalFormLabel_","aria-hidden":"true"},Qe=e("label",{class:"w-100"},"C\xD3DIGO",-1),We={class:"input-group mb-3"},Ye=e("label",{class:"sr-only",for:"inlineFormInputGroupcodigo"},"codigo",-1),Ze=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fa fa-key","aria-hidden":"true"})])],-1),$e=["disabled"],et={class:"input-group-append"},tt=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),st=[tt],nt=e("label",{class:"w-100"},"nome",-1),ot={class:"input-group mb-3"},it=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fas fa-bars"})])],-1),lt=["disabled"],rt={class:"input-group-append"},at=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),dt=[at],ct=e("label",{class:"w-100"},"M\xEAs",-1),ut={class:"input-group mb-3"},ht=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fas fa-calendar-alt"})])],-1),mt=["disabled"],_t={class:"input-group-append"},pt=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),bt=[pt],gt=u(" calendar "),ft=e("label",{class:"w-100"},"cnpj",-1),yt={class:"input-group mb-3"},Ct=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fas fa-money-check-alt"})])],-1),vt=["disabled"],wt={class:"input-group-append"},xt=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),Mt=[xt],Tt=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),kt=u(" Buscar"),Ft=[Tt,kt],At=e("i",{class:"fa fa-save","aria-hidden":"true"},null,-1),Et=u(" Salvar "),jt=[At,Et],Dt=e("i",{class:"fa fa-tiid_unidade","aria-hidden":"true"},null,-1),Ot=u(" Excluir"),Ut=[Dt,Ot],Pt=e("i",{class:"fa fa-ban","aria-hidden":"true"},null,-1),St=u(" Cancelar"),It=[Pt,St],Vt=e("br",null,null,-1),Ht={class:"alert alert-success d-none",role:"alert"},Bt={class:"alert alert-danger d-none",role:"alert"},Nt={class:"alert alert-info d-none",role:"alert"},Lt=e("br",null,null,-1),Gt={class:"table table-striped"},zt=e("thead",null,[e("tr",null,[e("th",null,"C\xF3digo"),e("th",null,"nome"),e("th",null,"Cnpj"),e("th")])],-1),Rt={class:"justify-content-between"},Xt=["onUpdate:modelValue"],qt={class:"d-flex justify-content-end"},Kt=["onClick"],Jt=u(" Editar "),Qt=e("i",{class:"fa fa-edit","aria-hidden":"true"},null,-1),Wt=[Jt,Qt];function Yt(i,t,l,r,s,o){return a(),d("div",T,[e("div",k,[e("div",F,[e("div",A,[e("div",E,[e("h5",j,p(s.state!="new"?"Editar parceiro":"Nova parceiro"),1),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=n=>o.close())},O)]),e("div",U,[P,e("div",S,[I,V,m(e("input",{type:"number",disabled:s.state!="filter",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=n=>s.elementCurrent.id=n),placeholder:"C\xF3digo",name:"id"},null,8,H),[[_,s.elementCurrent.id]]),e("div",B,[s.state=="filter"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo buscarcodigo",onClick:t[2]||(t[2]=n=>o.findID(s.elementCurrent.id))},L)):c("",!0)])]),G,e("div",z,[R,m(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=n=>s.elementCurrent.nome=n),placeholder:"T\xEDtulo da parceiro"},null,512),[[_,s.elementCurrent.nome]]),e("div",X,[s.state=="filter"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo",onClick:t[4]||(t[4]=n=>o.findbyField({nome:s.elementCurrent.nome}))},K)):c("",!0)])]),J,e("div",Q,[W,m(e("input",{type:"text",class:"form-control money","onUpdate:modelValue":t[5]||(t[5]=n=>s.elementCurrent.cnpj=n),name:"cnpj",placeholder:"___.___.___/____-__","data-inputmask":"'mask': '999.999.999/9999-99'"},null,512),[[_,s.elementCurrent.cnpj]]),e("div",Y,[s.state=="filter"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo",onClick:t[6]||(t[6]=n=>o.findbyField({cnpj:s.elementCurrent.cnpj}))},ee)):c("",!0)])])]),e("div",te,[s.state=="filter"?(a(),d("button",{key:0,name:"buscar",type:"button",class:"btn btn-primary buscar",onClick:t[7]||(t[7]=n=>o.findElements())},oe)):c("",!0),s.state=="new"||s.state=="edit"?(a(),d("button",{key:1,name:"salvar",type:"button",class:"btn btn-success salvar",onClick:t[8]||(t[8]=n=>{o.saveElement(),o.clearMsg()})},re)):c("",!0),s.state=="edit"?(a(),d("button",{key:2,name:"excluir",type:"button",class:"btn btn-danger excluir",onClick:t[9]||(t[9]=n=>o.confirmDeleteElement(s.elementCurrent))},ce)):c("",!0),e("button",{name:"cancelar",type:"button",class:"btn btn-danger cancelar",onClick:t[10]||(t[10]=n=>o.cancelState())},me)])])])]),e("div",_e,[e("div",pe,[e("div",be,[e("div",ge,[fe,e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:t[11]||(t[11]=n=>o.close())},Ce)]),e("div",ve,[e("p",null,"tem certeza que desja excluir este Parceiro "+p(s.elementCurrent.name)+" .",1)]),e("div",we,[e("button",{type:"button",class:"btn btn-primary",onClick:t[12]||(t[12]=n=>o.deleteElement())},"Sim"),e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:t[13]||(t[13]=n=>o.close())},"N\xE3o")])])])]),e("div",xe,[Me,e("div",Te,[ke,Fe,e("button",Ae,[Ee,(a(),d("svg",je,Oe))]),Ue])]),e("div",Pe,[e("div",Se,[e("button",{class:"btn border-0 position-absolute",type:"button",style:{"z-index":"900"},onClick:t[14]||(t[14]=n=>o.findbyField({nome:s.search}))},Ve),m(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=n=>s.search=n),class:"form-control rounded text-center",placeholder:"Buscar","aria-label":"","aria-describedby":"basic-addon1"},null,512),[[_,s.search]])]),e("button",{class:"bg-primary text-white border border-white rounded",onClick:t[16]||(t[16]=n=>o.newState())},Ne),e("button",{class:"bg-danger text-white border border-white rounded",onClick:t[17]||(t[17]=n=>o.filterState())},ze)]),Re,Xe,e("div",qe,[e("div",Ke,[e("div",Je,[Qe,e("div",We,[Ye,Ze,m(e("input",{type:"number",disabled:s.state!="new",class:"form-control","onUpdate:modelValue":t[18]||(t[18]=n=>s.elementCurrent.id=n),placeholder:"C\xF3digo",name:"id"},null,8,$e),[[_,s.elementCurrent.id]]),e("div",et,[s.state=="new"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo buscarcodigo",onClick:t[19]||(t[19]=n=>o.findID(s.elementCurrent.id))},st)):c("",!0)])]),nt,e("div",ot,[it,m(e("input",{type:"text",disabled:s.state!="new"&&s.state!="edit",class:"form-control","onUpdate:modelValue":t[20]||(t[20]=n=>s.elementCurrent.nome=n),placeholder:"T\xEDtulo da parceiro"},null,8,lt),[[_,s.elementCurrent.nome]]),e("div",rt,[s.state=="new"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo",onClick:t[21]||(t[21]=n=>o.findbyField({nome:s.elementCurrent.nome}))},dt)):c("",!0)])]),ct,e("div",ut,[ht,m(e("input",{type:"text",disabled:s.state!="new"&&s.state!="edit",class:"form-control mask","onUpdate:modelValue":t[22]||(t[22]=n=>s.elementCurrent.id_unidade=n),placeholder:"__/____","data-inputmask":"'mask': '99/9999'"},null,8,mt),[[_,s.elementCurrent.id_unidade]]),e("div",_t,[s.state=="new"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo",onClick:t[23]||(t[23]=n=>o.findbyField({id_unidade:s.elementCurrent.id_unidade}))},bt)):c("",!0)])]),gt,ft,e("div",yt,[Ct,m(e("input",{type:"text",disabled:s.state!="new"&&s.state!="edit",class:"form-control money","onUpdate:modelValue":t[24]||(t[24]=n=>s.elementCurrent.cnpj=n),name:"cnpj"},null,8,vt),[[_,s.elementCurrent.cnpj]]),e("div",wt,[s.state=="new"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo",onClick:t[25]||(t[25]=n=>o.findbyField({cnpj:s.elementCurrent.cnpj}))},Mt)):c("",!0)])]),s.state=="filter"?(a(),d("button",{key:0,name:"buscar",type:"button",class:"btn btn-primary buscar",onClick:t[26]||(t[26]=n=>o.findElements())},Ft)):c("",!0),s.state=="new"||s.state=="edit"?(a(),d("button",{key:1,name:"salvar",type:"button",class:"btn btn-success salvar",onClick:t[27]||(t[27]=n=>{o.saveElement(),o.clearMsg()})},jt)):c("",!0),c("",!0),s.state=="edit"?(a(),d("button",{key:3,name:"excluir",type:"button",class:"btn btn-danger excluir",onClick:t[29]||(t[29]=n=>o.confirmDeleteElement(s.elementCurrent))},Ut)):c("",!0),e("button",{name:"cancelar",type:"button",class:"btn btn-danger cancelar",onClick:t[30]||(t[30]=n=>o.cancelState())},It)]),Vt,e("div",Ht,p(s.successMsg),1),e("div",Bt,p(s.errorMsg),1),e("div",Nt,p(s.infoMsg),1),Lt,e("table",Gt,[zt,e("tbody",null,[(a(!0),d(w,null,x(s.elements,n=>(a(),d("tr",Rt,[e("td",null,[m(e("input",{type:"hidden",name:"id","onUpdate:modelValue":g=>n.id=g},null,8,Xt),[[_,n.id]]),u(p(n.id),1)]),e("td",null,p(n.nome),1),e("td",null,p(n.cnpj),1),e("td",qt,[e("button",{name:"editar",type:"button",class:"btn btn-primary minieditar btn-sm",onClick:g=>o.edit(n)},Wt,8,Kt)])]))),256))])])])])])}const ts=f(M,[["render",Yt]]);export{ts as default};
