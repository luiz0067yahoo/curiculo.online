import{_ as f,H as C,F as v}from"./FooterView.19ba57dd.js";import{I as y,u as c,a as m}from"./until.b06b892c.js";import{o as a,c as d,d as e,t as h,w as p,v as _,g as u,F as T,h as w,e as b}from"./index.cb469efe.js";const M={components:{HeaderView:C,FooterView:v},name:"FormUserComponent",data(){return{url:"https://curiculo.online/server/metas",state:"new",repeat_password:"",errorMsg:"",errorPhone:"",errorstatus:"",successMsg:"",infoMsg:"",modalDelete:null,elements:[],elementCurrent:{id:"",titulo:"",mes:"",valor:"",status:"",descritivo:""}}},mounted:function(){this.getAllelements(),y().mask(document.querySelectorAll("input.mask")),this.modalDelete=new bootstrap.Modal(document.getElementById("modalDelete"))},methods:{setPhone(){var o=$("#phone").val();this.errorPhone=null,c.phoneIsValid(o)?this.elementCurrent.phone=o:this.errorPhone='n\xE3o \xE9 um telefone v\xE1lido exemplo de telefone: "(99) 99999-9999"'},setCellPhone(){var o=$("#status").val();this.errorstatus=null,c.phoneIsValid(o)?this.elementCurrent.status=o:this.errorstatus='n\xE3o \xE9 um celular v\xE1lido exemplo de telefone: "(99) 99999-9999"'},async getAllelements(){let o=this.elements,s=this.errorMsg;await m.get(this.url,{},{mode:"no-cors",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json;charset=UTF-8"}}).then(function(i){i.data.error?(this.errorMsg=i.data.message,console.log(this.errorMsg)):o=c.ArrayObjUtf8Tounicode(i.data.elements)}),this.elements=o,this.errorMsg=s},async findElements(){this.state="find";let o=this.elements,s=this.errorMsg;await m.get(this.url+"?"+new URLSearchParams(this.elementCurrent).toString(),{},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json;charset=UTF-8"}}).then(function(i){i.data.error?s=i.data.message:o=c.ArrayObjUtf8Tounicode(i.data.elements)}),this.elements=o,this.errorMsg=s},async findbyField(o){this.state="find";let s=this.elements,i=this.errorMsg;await m.get(this.url+"?"+new URLSearchParams(o).toString(),{},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json;charset=UTF-8"}}).then(function(r){r.data.error?i=r.data.message:s=c.ArrayObjUtf8Tounicode(r.data.elements)}),this.elements=s,this.errorMsg=i},async findID(){this.state="find";let o=this.elements,s=this.errorMsg,i=this.successMsg,r=this.elementCurrent;await m.get(this.url+"/"+r.id,{},{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PATCH, PUT, DELETE, OPTIONS","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json;charset=UTF-8"}}).then(function(t){r={},t.data.error?s=t.data.message:(i=t.data.message,o=c.ArrayObjUtf8Tounicode(t.data.elements),r=o[0],$("#phone").val(r.phone),$("#status").val(r.status))}),this.elements=o,this.errorMsg=s,this.successMsg=i,this.elementCurrent=r},async saveElement(){this.state="edit",c.toFormData(this.elementCurrent),/^\+?(0|[1-9]\d*)$/.test(this.elementCurrent.id)?await this.updateElement():await this.createElement()},async updateElement(){this.state="edit";var o={...this.elementCurrent};delete o.id;var s=c.toFormData(o);let i=this.elements,r=this.errorMsg,t=this.successMsg,l=this.elementCurrent;await m.put(this.url+"/"+l.id,s,{mode:"no-cors",headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(n){n.data.error?r=n.data.message:(t=n.data.message,i=c.ArrayObjUtf8Tounicode(n.data.elements),l=i[0])}),this.elements=i,this.errorMsg=r,this.successMsg=t,this.elementCurrent=l},async createElement(){this.state="edit";var o=c.toFormData(this.elementCurrent);let s=this.elements,i=this.errorMsg,r=this.successMsg,t=this.elementCurrent;await m.post(this.url,o,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(l){l.data.error?i=l.data.message:(r=l.data.message,s=c.ArrayObjUtf8Tounicode(l.data.elements),t=s[0])}),this.elements=s,this.errorMsg=i,this.successMsg=r,this.elementCurrent=t},async deleteElement(){this.state="find";let o=this.elementCurrent,s=this.elements,i=this.errorMsg,r=this.successMsg,t=this.getAllelements;await m.delete(this.url+"/"+o.id,{},{mode:"no-cors",headers:{"Content-Type":"application/json;charset=UTF-8"},withCredentials:!0,credentials:"same-origin"}).then(function(l){o={},l.data.error?(i=l.data.message,console.log(l.data)):(r=l.data.message,t())}).catch(function(l){console.log(l),console.log("Show error notification!"),i=l.data}),this.modalDelete.hide(),this.elements=s,this.errorMsg=i,this.successMsg=r,this.elementCurrent={id:"",titulo:"",mes:"",valor:"",status:"",descritivo:""}},edit(o){this.state="edit",this.elementCurrent=o},confirmDeleteElement(o){this.elementCurrent=o,this.modalDelete.show()},clearMsg(){this.errorMsg="",this.successMsg=""},cleanFieldHiddeButtons(){try{for(var o in CKEDITOR.instances){var s=CKEDITOR.instances[o];s.setData("")}}catch{}this.elementCurrent={id:"",titulo:"",mes:"",valor:"",status:"",descritivo:""},this.modalDelete.hide()},newState(){this.state="new",this.cleanFieldHiddeButtons()},cancelState(){this.state="cancel",this.cleanFieldHiddeButtons()},close(){this.modalDelete.hide()},editState(){this.state="edit",this.cleanFieldHiddeButtons()}}},A={class:"container"},k={class:"modal",id:"modalDelete",tabindex:"-1",role:"dialog","aria-labelledby":"modalDeleteLabel","aria-hidden":"true"},E={class:"modal-dialog",role:"document"},x={class:"modal-content"},D={class:"modal-header"},O=e("h5",{class:"modal-title"},"Excluir",-1),U=e("span",{"aria-hidden":"true"},"\xD7",-1),F=[U],S={class:"modal-body"},P={class:"modal-footer"},j=e("h1",null,"CADASTRO DE METAS",-1),V=e("br",null,null,-1),I=e("br",null,null,-1),H={class:"row"},B={class:"sm-12"},N={class:"form-row align-items-center"},L=e("label",{class:"w-100"},"C\xD3DIGO",-1),G={class:"input-group mb-3"},R=e("label",{class:"sr-only",for:"inlineFormInputGroupcodigo"},"codigo",-1),X=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fa fa-key","aria-hidden":"true"})])],-1),q=["disabled"],K={class:"input-group-append"},z=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),J=[z],Q=e("label",{class:"w-100"},"T\xEDtulo",-1),W={class:"input-group mb-3"},Y=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fas fa-bars"})])],-1),Z=["disabled"],ee={class:"input-group-append"},te=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),se=[te],ne=e("label",{class:"w-100"},"M\xEAs",-1),le={class:"input-group mb-3"},oe=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fas fa-calendar-alt"})])],-1),ie=["disabled"],re={class:"input-group-append"},ae=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),de=[ae],ue=b(" calendar "),ce=e("label",{class:"w-100"},"valor",-1),he={class:"input-group mb-3"},me=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fas fa-money-check-alt"})])],-1),pe=["disabled"],_e={class:"input-group-append"},be=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),ge=[be],fe=e("label",{class:"w-100"},"status",-1),Ce={class:"input-group mb-3"},ve=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fas fa-tasks"})])],-1),ye=["disabled"],Te={class:"input-group-append"},we=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),Me=[we],Ae=e("label",{class:"w-100"},"Descritivo",-1),ke={class:"input-group mb-3"},Ee=e("div",{class:"input-group-prepend"},[e("div",{class:"input-group-text h-100"},[e("i",{class:"fas fa-align-justify"})])],-1),xe=["disabled"],De={class:"input-group-append"},Oe=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),Ue=[Oe],Fe=e("i",{class:"fa fa-sticky-note","aria-hidden":"true"},null,-1),Se=b(" Novo"),Pe=[Fe,Se],je=e("i",{class:"fa fa-search","aria-hidden":"true"},null,-1),Ve=b(" Buscar"),Ie=[je,Ve],He=e("i",{class:"fa fa-save","aria-hidden":"true"},null,-1),Be=b(" Salvar "),Ne=[He,Be],Le=e("i",{class:"fa fa-times","aria-hidden":"true"},null,-1),Ge=b(" Excluir"),Re=[Le,Ge],Xe=e("i",{class:"fa fa-ban","aria-hidden":"true"},null,-1),qe=b(" Cancelar"),Ke=[Xe,qe],ze=e("br",null,null,-1),Je={class:"alert alert-success d-none",role:"alert"},Qe={class:"alert alert-danger d-none",role:"alert"},We={class:"alert alert-info d-none",role:"alert"},Ye=e("br",null,null,-1),Ze={class:"table table-striped resultado_busca"},$e=e("thead",null,[e("tr",null,[e("th",null,"C\xF3digo"),e("th",null,"T\xEDtulo"),e("th",null,"Valor"),e("th",null,"status"),e("th",null,"Descritivo"),e("th",null,"A\xE7\xE3o")])],-1),et=["onUpdate:modelValue"],tt=["onClick"],st=e("i",{class:"fa fa-edit","aria-hidden":"true"},null,-1),nt=[st],lt=["onClick"],ot=e("i",{class:"fa fa-times","aria-hidden":"true"},null,-1),it=[ot];function rt(o,s,i,r,t,l){return a(),d("div",A,[e("div",k,[e("div",E,[e("div",x,[e("div",D,[O,e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:s[0]||(s[0]=n=>l.close())},F)]),e("div",S,[e("p",null,"tem certeza que desja excluir este Meta "+h(t.elementCurrent.name)+" .",1)]),e("div",P,[e("button",{type:"button",class:"btn btn-primary",onClick:s[1]||(s[1]=n=>l.deleteElement())},"Sim"),e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",onClick:s[2]||(s[2]=n=>l.close())},"N\xE3o")])])])]),j,V,I,e("div",H,[e("div",B,[e("div",N,[L,e("div",G,[R,X,p(e("input",{type:"number",disabled:t.state!="new",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=n=>t.elementCurrent.id=n),placeholder:"C\xF3digo",name:"id"},null,8,q),[[_,t.elementCurrent.id]]),e("div",K,[t.state=="new"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo buscarcodigo",onClick:s[4]||(s[4]=n=>l.findID(t.elementCurrent.id))},J)):u("",!0)])]),Q,e("div",W,[Y,p(e("input",{type:"text",disabled:t.state!="new"&&t.state!="edit",class:"form-control","onUpdate:modelValue":s[5]||(s[5]=n=>t.elementCurrent.titulo=n),placeholder:"T\xEDtulo da meta"},null,8,Z),[[_,t.elementCurrent.titulo]]),e("div",ee,[t.state=="new"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo",onClick:s[6]||(s[6]=n=>l.findbyField({titulo:t.elementCurrent.titulo}))},se)):u("",!0)])]),ne,e("div",le,[oe,p(e("input",{type:"text",disabled:t.state!="new"&&t.state!="edit",class:"form-control mask","onUpdate:modelValue":s[7]||(s[7]=n=>t.elementCurrent.mes=n),placeholder:"__/____","data-inputmask":"'mask': '99/9999'"},null,8,ie),[[_,t.elementCurrent.mes]]),e("div",re,[t.state=="new"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo",onClick:s[8]||(s[8]=n=>l.findbyField({mes:t.elementCurrent.mes}))},de)):u("",!0)])]),ue,ce,e("div",he,[me,p(e("input",{type:"text",disabled:t.state!="new"&&t.state!="edit",class:"form-control money","onUpdate:modelValue":s[9]||(s[9]=n=>t.elementCurrent.valor=n),name:"valor"},null,8,pe),[[_,t.elementCurrent.valor]]),e("div",_e,[t.state=="new"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo",onClick:s[10]||(s[10]=n=>l.findbyField({valor:t.elementCurrent.valor}))},ge)):u("",!0)])]),fe,e("div",Ce,[ve,p(e("input",{type:"text",disabled:t.state!="new"&&t.state!="edit",class:"form-control","onUpdate:modelValue":s[11]||(s[11]=n=>t.elementCurrent.status=n),placeholder:"status do Meta",name:"status"},null,8,ye),[[_,t.elementCurrent.status]]),e("div",Te,[t.state=="new"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo",onClick:s[12]||(s[12]=n=>l.findbyField({status:t.elementCurrent.status}))},Me)):u("",!0)])]),Ae,e("div",ke,[Ee,p(e("input",{type:"text",disabled:t.state!="new"&&t.state!="edit",class:"form-control","onUpdate:modelValue":s[13]||(s[13]=n=>t.elementCurrent.descritivo=n)},null,8,xe),[[_,t.elementCurrent.descritivo]]),e("div",De,[t.state=="new"?(a(),d("button",{key:0,style:{height:"38px"},name:"buscar",type:"button",class:"btn btn-primary buscarcampo",onClick:s[14]||(s[14]=n=>l.findbyField({descritivo:t.elementCurrent.descritivo}))},Ue)):u("",!0)])]),t.state=="find"||t.state=="cancel"||t.state=="edit"?(a(),d("button",{key:0,name:"novo",type:"button",class:"btn btn-dark novo",onClick:s[15]||(s[15]=n=>l.newState())},Pe)):u("",!0),t.state=="new"?(a(),d("button",{key:1,name:"buscar",type:"button",class:"btn btn-primary buscar",onClick:s[16]||(s[16]=n=>l.findElements())},Ie)):u("",!0),t.state=="new"||t.state=="edit"?(a(),d("button",{key:2,name:"salvar",type:"button",class:"btn btn-success salvar",onClick:s[17]||(s[17]=n=>{l.saveElement(),l.clearMsg()})},Ne)):u("",!0),u("",!0),t.state=="edit"?(a(),d("button",{key:4,name:"excluir",type:"button",class:"btn btn-danger excluir",onClick:s[19]||(s[19]=n=>l.confirmDeleteElement(t.elementCurrent))},Re)):u("",!0),t.state=="new"||t.state=="edit"?(a(),d("button",{key:5,name:"cancelar",type:"button",class:"btn btn-danger cancelar",onClick:s[20]||(s[20]=n=>l.cancelState())},Ke)):u("",!0)]),ze,e("div",Je,h(t.successMsg),1),e("div",Qe,h(t.errorMsg),1),e("div",We,h(t.infoMsg),1),Ye,e("table",Ze,[$e,e("tbody",null,[(a(!0),d(T,null,w(t.elements,n=>(a(),d("tr",null,[e("td",null,[p(e("input",{type:"hidden",name:"id","onUpdate:modelValue":g=>n.id=g},null,8,et),[[_,n.id]]),b(h(n.id),1)]),e("td",null,h(n.titulo),1),e("td",null,h(n.valor),1),e("td",null,h(n.status),1),e("td",null,h(n.descritivo),1),e("td",null,[e("button",{name:"editar",type:"button",class:"btn btn-primary minieditar btn-sm",onClick:g=>l.edit(n)},nt,8,tt),e("button",{name:"excluir",type:"button",class:"btn btn-danger miniexcluir btn-sm",onClick:g=>l.confirmDeleteElement(n)},it,8,lt)])]))),256))])])])])])}const ct=f(M,[["render",rt]]);export{ct as default};
